# 组件开发规范

开发过程中，遇到现有组件库无法满足需求时，先分析需要实现的组件是否为项目中高频使用的可复用组件，若是可复用组件则上报开发组长，由开发组长安排设计、开发。若是简单组件，可自己实现，放到自己模块的 components 目录下。

## 开发事项

1. 要求

- 1.1 规范
  请遵循/docs/[代码规范-VUE.md]、[代码规范-命名规范.md]、[代码规范-HTML.md]、[代码规范-CSS.md]、[代码规范-注释.md]等规范进行开发。
- 1.2 文档
  组件开发人员应写好 markdown 文档，包括 props 说明表格、methods、events、版本更新日志等(底部附模版)。
- 1.3 用例
  建议组件开发人员写好组件用例，并做好组件测试。

2. 设计

- 1.1 组件分类
  **组件开发人员在动手开发前，要先分析组件属于哪一类，再根据分类进行命名、设计、开发。**
  VUE 组件一般分类：

  - 页面视图，它本质上也是一个组件（.vue），主要承载当前页面的 HTML 结构，会包含数据获取、数据整理、数据可视化等常规业务。整个文件相对较大，但一般不会有 props 选项和 自定义事件，因为它作为路由的渲染，不会被复用，因此也不会对外提供接口。在项目开发中，我们写的大部分代码都是这类的组件（页面），协同开发时，每人维护自己的页面，很少有交集。这类组件相对是最好写的，因为主要是还原设计稿，完成需求，不需要太多模块和架构设计上的考虑。

  - 基础组件(通用组件)，不包含业务，比如日期选择器、模态框等。这类组件作为项目的基础控件，会被大量使用，因此组件的 API 进行过高强度的抽象，可以通过不同配置实现不同的功能。

  - 业务组件。它不像第二类基础组件只包含某个功能，而是在业务中被多个页面复用的，它与基础组件的区别是，业务组件只在当前项目中会用到，不具有通用性，而且会包含一些业务，比如数据请求；而基础组件不含业务，在任何项目中都可以使用，功能单一，比如一个银行卡选择组件。业务组件更像是介于第一类和第二类之间，在开发上也与基础组件类似，但寄托于项目，你可以使用项目中的技术栈，比如 Vuex、axios、echarts 等，所以它的开发难度相对基础组件要容易点，但要对整个项目的业务熟悉以及整体把握，须考虑组件的可维护性和复用性。

- 1.2 组件设计
  **组件设计也应该遵循设计模式开放封闭原则-“对拓展开放，对修改封闭”。**一个再复杂的组件，都是由三部分组成的：prop、event、slot，它们构成了 Vue.js 组件的 API。如果你开发的是一个通用组件，那一定要事先设计好这三部分，因为组件一旦发布，后面再修改 API 就很困难了，使用者都是希望不断新增功能，修复 bug，而不是经常变更接口。

  - 1.2.1 API 设计
    满足基本需求的前提下，提供尽量少的 API；为 API 选项提供尽量少的配置项。

    - 属性 prop: prop 定义了这个组件有哪些可配置的属性，组件的核心功能也都是它来确定的。写通用组件时，props 最好用对象的写法，这样可以针对每个属性设置类型、默认值或自定义校验属性的值，这点在组件开发中很重要，然而很多人却忽视，直接使用 props 的数组用法，这样的组件往往是不严谨的。要注意的是，组件里定义的 props，都是单向数据流，也就是只能通过父级修改，组件自己不能修改 props 的值，只能修改定义在 data 里的数据，非要修改，也是通过后面介绍的自定义事件通知父级，由父级来修改。命名参考[代码规范-命名规范.md]

    - 插槽 slot: 区分具名 slot 以及默认 slot。

    - 自定义事件 event: 命名参考[代码规范-命名规范.md]。

- 1.2.2 UI/UE
  作为一个公共组件，UI 还原度以及使用体验是很重要的。
  - UI: 高度还原 UI 设计稿，兼容各种设备、浏览器。
  - UE: 页面流畅、过渡柔和、易于使用。

3. readme.md 模版

```markdown
# API

## Props

| 属性     | 说明   | 类型    | 默认值  | 备注                                                      |
| :------- | :----- | :------ | :------ | :-------------------------------------------------------- |
| type     | 样式   | String  | default | default, primary,warning, disabled, link                  |
| size     | 尺寸   | String  | large   | large/small                                               |
| round    | 圆角   | Boolean | false   | -                                                         |
| inactive | 未激活 | Boolean | false   | inactive 设为 true 和 disabled 类型的按钮都无法点击...... |
```

## Events

### @click(event)

按钮点击事件
